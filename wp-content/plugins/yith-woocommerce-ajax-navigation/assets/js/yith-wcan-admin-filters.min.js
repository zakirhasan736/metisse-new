(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,i,n){return(i=function(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,i||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var i=jQuery,n=(i("body"),function(e){var t;if(void 0!==i.fn.block){var n="#fff center center no-repeat";"undefined"!=typeof yith_wcan_shortcodes&&null!==(t=yith_wcan_shortcodes)&&void 0!==t&&t.loader&&(n="url('".concat(yith_wcan_shortcodes.loader,"') ").concat(n)),e.block({message:null,overlayCSS:{background:n,opacity:.7}})}}),r=function(e){void 0!==i.fn.unblock&&e.unblock()},o=function(e,n){var r=n.formatName,o=n.filterItems,a={},l=e.find(":input").not("[disabled]");return"function"==typeof o&&(l=l.filter(o)),l.each((function(){var e,n=i(this),o=n.attr("name");if(o&&(o=o.replace(/^(.*)\[]$/,"$1"),"function"==typeof r&&(o=r(o)),!n.is('[type="radio"]')||n.is(":checked")))if(e=n.val(),-1!==o.indexOf("[")){var l=o.split("[").map((function(e){return e.replace(/[\[, \]]/g,"")})),s=l.shift(),c=l.reverse().reduce((function(e,i){return t({},i,e)}),e);void 0===a[s]?a[s]=c:a[s]=i.extend(!0,a[s],c)}else a[o]=e})),a};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=function(e,t,o,a){var l=i(this);o instanceof FormData?o.append("action","yith_wcan_".concat(t)):o=s({action:"yith_wcan_".concat(t)},o);var c=s({url:ajaxurl,data:o,dataType:"json",method:e,beforeSend:function(){return l.length&&n(l)},complete:function(){return l.length&&r(l)}},a);return i.ajax(c)};const f={request:u,get:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return u.call.apply(u,[this,"get"].concat(t))},post:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return u.call.apply(u,[this,"post"].concat(t))}};var d={taxonomy:{type:"tax"},use_all_terms:{type:"tax"},term_ids:{type:"tax",use_all_terms:"!:checked"},filter_design:{type:["tax","review","price_range"]},customize_terms:{type:"tax",use_all_terms:"!:checked"},terms_options:{term_ids:function(e){return!!e},customize_terms:":checked",__show:function(e){return e.afterTermsSelected()}},label_position:{filter_design:["color","label"]},column_number:{filter_design:["label","color"],label_position:["below","hide"]},show_search:{type:"tax",filter_design:"select"},price_ranges:{type:"price_range"},price_slider_adaptive_limits:{type:"price_slider"},price_slider_design:{type:"price_slider"},price_slider_min:{type:"price_slider",price_slider_adaptive_limits:"!:checked"},price_slider_max:{type:"price_slider",price_slider_adaptive_limits:"!:checked"},price_slider_step:{type:"price_slider"},order_options:{type:"orderby"},show_stock_filter:{type:"stock_sale"},show_sale_filter:{type:"stock_sale"},show_featured_filter:{type:"stock_sale"},toggle_style:{show_toggle:":checked"},order_by:{type:"tax"},order:{type:"tax"},show_count:{type:["tax","price_range","review","stock_sale"]},hierarchical:{type:"tax",filter_design:["checkbox","radio","text"]},multiple:{type:["tax","review","price_range"],filter_design:"!radio"},relation:{type:"tax",multiple:":checked"},adoptive:{type:["tax","price_range","review","stock_sale"]}};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,a,l=[],s=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;s=!1}else for(;!(s=(n=o.call(i)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function y(e,t,i){return(t=g(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var b=function(){return e=function e(t,i,n){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"$container",void 0),y(this,"$fields",void 0),y(this,"dependencies",{}),y(this,"context",null),y(this,"checkFieldConditions",(function(e){for(var t=!0,i=0,n=Object.entries(e);i<n.length;i++){var r,o,a=p(n[i],2),l=a[0],s=a[1],c=void 0,u=void 0;if(t&&!["__show","__hide"].includes(l)&&null!==(r=c=this.findField(l,!1))&&void 0!==r&&r.length)u=c.first().is('input[type="radio"]')?c.filter(":checked").val().toString():null===(o=c)||void 0===o||null===(o=o.val())||void 0===o?void 0:o.toString(),t=Array.isArray(s)?s.includes(u):"function"==typeof s?s(u,c,this.$container):0===s.indexOf(":")?c.is(s):0===s.indexOf("!:")?!c.is(s.toString().substring(1)):0===s.indexOf("!")?s.toString().substring(1)!==u:s.toString()===u,void 0!==this.dependencies[l]&&(t=t&&this.checkFieldConditions(this.dependencies[l]))}return t})),this.$container=t,this.dependencies=i,this.context=n||{},null!==(r=this.$container)&&void 0!==r&&r.length&&(this.initFields(),null!==(o=this.$fields)&&void 0!==o&&o.length&&this.initDependencies())},(t=[{key:"initFields",value:function(){this.$fields=this.$container.find(":input")}},{key:"findField",value:function(e,t){var i;return"function"==typeof this.context.findField?this.context.findField(e,t):(i=this.$container.find(':input[name*="'.concat(e,'"]'))).length?t?i.closest(".yith-toggle-content-row"):i:null}},{key:"initDependencies",value:function(){Object.keys(this.dependencies).length&&this.handleDependencies()}},{key:"handleDependencies",value:function(){var e=this;this.$fields.on("change",(function(){return e.applyDependencies()})),this.applyDependencies()}},{key:"applyDependencies",value:function(){for(var e=0,t=Object.entries(this.dependencies);e<t.length;e++){var i=p(t[e],2),n=i[0],r=i[1],o=this.findField(n,!0);this.checkFieldConditions(r)?(null==o||o.css({display:"table"}),"function"==typeof(null==r?void 0:r.__show)&&(null==r||r.__show(this.context))):(null==o||o.hide(),"function"==typeof(null==r?void 0:r.__hide)&&(null==r||r.__hide(this.context)))}}}])&&v(e.prototype,t),i&&v(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function k(e,t,i){return(t=$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var S=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"id",void 0),k(this,"$term",void 0),k(this,"filter",void 0),t.length&&(this.$term=t,this.filter=i,t.hasClass("initialized")||this.init())},(t=[{key:"init",value:function(){this.initTabs(),this.initImageSelector(),this.initAdditionalColor(),this.initFields(),this.$term.addClass("initialized")}},{key:"initTabs",value:function(){var e=this;this.$term.find(".term-tab-header").on("click",(function(t){var n=i(t.target).data("tab");t.preventDefault(),e.showTab(n)})),this.showTab(this.$term.find(".term-mode").val())}},{key:"initImageSelector",value:function(){var e,t=this.$term.find(".image-selector"),o=t.find(".placeholder-image"),a=t.find(".selected-image"),l=a.find("img"),s=t.find(".term-image"),c=a.find(".clear-image");o.off("click").on("click",(function(){n(o),e||((e=wp.media({title:yith_wcan_admin.labels.upload_media,button:{text:yith_wcan_admin.labels.confirm_media},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();l.remove(),l=i("<img/>",{src:t.url}),a.prepend(l),s.val(t.id).change(),r(o),o.hide(),a.show()})),e.on("close",(function(){r(o)}))),e.open()})),c.off("click").on("click",(function(){return s.val("").change(),a.hide(),o.show(),!1})),s.val()||c.click()}},{key:"initAdditionalColor",value:function(){var e=this,t=this.$term.find(".term-add-second-color"),i=this.$term.find(".term-hide-second-color"),n=this.$term.find(".additional-color").find("input"),r=n.val();t.on("click",(function(){return e.showAdditionalColor(),!1})),i.on("click",(function(){return e.hideAdditionalColor(),!1})),r&&r!==n.data("default-color")?this.showAdditionalColor():this.hideAdditionalColor()}},{key:"initFields",value:function(){var e=this;this.$term.trigger("yith_fields_init"),this.$term.find(".yith-plugin-fw-colorpicker--initialized").wpColorPicker("option","change",(function(){return e.filter.afterTermChanged(e)})),this.$term.on("change",":input",(function(){return e.filter.afterTermChanged(e)}))}},{key:"showTab",value:function(e,t){var i=this.$term.find(".term-tab-header"),n=this.$term.find(".tab"),r=n.filter(".tab-"+e);if(r.length&&(i.is(":visible")||t)){var o=this.$term.find(".term-mode"),a=o.val();i.removeClass("active").filter('[data-tab="'+e+'"]').addClass("active"),n.hide(),r.show(),o.val(e),a!==e&&o.change()}}},{key:"showAdditionalColor",value:function(){this.$term.find(".term-add-second-color").parent().hide().next(".additional-color").show().find(".wp-color-picker").prop("disabled",!1).change()}},{key:"hideAdditionalColor",value:function(){this.$term.find(".term-hide-second-color").parent().find(".wp-color-picker").prop("disabled",!0).val("").change().end().hide().prev("p").show()}},{key:"updateFields",value:function(e){var t=!1;switch(e){case"complete":this.$term.find(".term-tab-headers").show().find('a[data-tab="color"], span').show(),this.$term.find(".tab.tab-color").show(),this.$term.find(".tab.tab-image").show(),t=this.$term.find(".term-mode").val();break;case"colors_only":this.$term.find(".term-tab-headers").show().find('a[data-tab="image"], span').hide(),this.$term.find(".tab.tab-color").show(),this.$term.find(".tab.tab-image").hide(),t="color";break;case"image_only":this.$term.find(".term-tab-headers").show().find('a[data-tab="color"], span').hide(),this.$term.find(".tab.tab-color").hide(),this.$term.find(".tab.tab-image").show(),t="image";break;default:this.$term.find(".term-tab-headers").hide(),this.$term.find(".tab.tab-color").hide(),this.$term.find(".tab.tab-image").hide()}t&&this.showTab(t,!0)}},{key:"getId",value:function(){return this.id||(this.id=this.$term.data("term_id"))}},{key:"getData",value:function(){var e=o(this.$term,{formatName:function(e){return e.replace(/filters\[[0-9]+]\[terms]\[[0-9]+]\[([a-z0-9_-]+)]/,"$1")}});return e.term_id=this.getId(),e}}])&&_(e.prototype,t),a&&_(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function j(e,t,i){return(t=I(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}var O=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"id",void 0),j(this,"$range",void 0),j(this,"filter",void 0),t.length&&(this.$range=t,this.filter=i,t.hasClass("initialized")||this.init())},t=[{key:"init",value:function(){this.initDependencies(),this.initRemove(),this.$range.addClass("initialized")}},{key:"initRemove",value:function(){var e=this;this.$range.find("a.range-remove").on("click",(function(t){t.preventDefault(),e.$range.remove(),e.filter.afterRangeDelete()}))}},{key:"initDependencies",value:function(){this.$range.find('[name*="unlimited"]').on("change",(function(){var e=i(this),t=e.closest(".range-box").find(".max");e.is(":checked")?t.hide():t.show()})).change()}},{key:"populate",value:function(e){var t=e.min,i=e.max,n=e.unlimited;this.$range.find(".min").find(":input").val(t),this.$range.find(".max").find(":input").val(i),this.$range.find(".unlimited").find(":input").prop("checked",n)}},{key:"toggleUnlimited",value:function(e){var t=this.$range.find(".unlimited"),i=t.find(":input");e&&t.show(),e||(i.prop("checked",!1).change(),t.hide())}},{key:"getId",value:function(){return this.id||(this.id=this.$range.data("range_id"))}}],t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function P(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function F(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=R(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){N(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,a,l=[],s=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;s=!1}else for(;!(s=(n=o.call(i)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return z(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function M(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function N(e,t,i){return(t=B(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var L=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"id",void 0),N(this,"$filter",void 0),N(this,"preset",void 0),N(this,"terms",new Map),N(this,"ranges",new Map),t.length&&(this.$filter=t,this.$toggleTitle=t.find(".yith-toggle-title"),this.$title=t.find("h3.title"),this.preset=i,t.hasClass("initialized")||this.init())},t=[{key:"init",value:function(){this.initTitle(),this.initToggle(),this.initSave(),this.initDelete(),this.initClone(),this.initTerms(),this.initRanges(),this.initDependencies(),this.initFields(),this.$filter.addClass("initialized")}},{key:"initTitle",value:function(){var e=this,t=this.$filter.find(".heading-field").first();this.$title.length&&t.length&&t.on("keyup",(function(){var i=t.val();e.$title.html(i||'<span class="no-title">'.concat(yith_wcan_admin.labels.no_title,"</span>"))}))}},{key:"initToggle",value:function(){var e=this;this.$toggleTitle.on("click",(function(t){i(t.target).closest(".filter-actions").length||(e.isOpen()?e.close():e.open())}))}},{key:"initDependencies",value:function(){new b(this.$filter,d,this)}},{key:"initFields",value:function(){this.$filter.trigger("yith_fields_init"),this.initTermSearch(),this.initCustomizeTerms(),this.initTaxonomy(),this.initType(),this.initDesign(),this.initCurrencyFields(),this.initErrorsHandling()}},{key:"initTermSearch",value:function(){var e=this,t=this.$filter.find(".term-search").first(),o=this.$filter.find(".taxonomy").first(),a=t.closest(".yith-plugin-fw-field-wrapper"),l=function(e){return{term:e.term,all:void 0!==e.all?e.all:0,taxonomy:o.val(),selected:t.val(),action:"yith_wcan_search_term",security:yith_wcan_admin.nonce.search_term}},s={placeholder:i(this).data("placeholder"),minimumInputLength:"1",templateSelection:function(e){return e.text.replace(/^(.*>)([^>]+)$/,"$2").replace("&amp;","&").trim()},templateResult:function(e){return e.text.replace("&amp;","&")},ajax:{url:ajaxurl,dataType:"json",delay:250,data:l,processResults:function(e){var t=[];return e&&i.each(e,(function(e,i){t.push({id:e,text:i})})),{results:t}},cache:!0},sorter:function(e){return e}};t.selectWoo(s),t.on("change",(function(t,i){return e.afterTermsSelected(i)})),a.find(".yith-plugin-fw-select-all").on("click",(function(s){return s.preventDefault(),!!e.confirmAddAllTerms(o)&&(n(a),i.get(ajaxurl,l({term:"",all:1})).then((function(e){var n=t.val();n||(n=[]),t.find("option").not(":selected").remove();for(var o=0,l=Object.entries(e);o<l.length;o++){var s=E(l[o],2),c=s[0],u=s[1];n.push(c),t.append(i("<option/>",{value:c,text:u}))}t.val(n).trigger("change",[!0]),r(a)})),!1)})),a.find(".yith-plugin-fw-deselect-all").on("click",(function(e){return e.preventDefault(),t.find("option").remove().end().val("").change(),!1}))}},{key:"initCustomizeTerms",value:function(){var e=this,t=this.$filter.find(".customize-terms").find("input"),i=this.$filter.find(".order-by");t.on("change",(function(){i.find('[value="include"]').prop("disabled",!t.is(":checked")),i.removeClass("enhanced").trigger("wc-enhanced-select-init"),!i.val()&&i.val("name"),e.afterTermsSelected()})).change()}},{key:"initTaxonomy",value:function(){var e=this,t=this.$filter.find(".taxonomy").first();this.$filter.find(".filter-design").first().on("change",(function(){return e.customizeTermsNotice()})),t.on("change",(function(){t.data("taxonomy")!==t.val()&&e.afterTaxonomyChange()}))}},{key:"afterTaxonomyChange",value:function(){this.$filter.find(".term-search").first().find("option").remove().end().change(),this.customizeTermsNotice()}},{key:"customizeTermsNotice",value:function(){var e,t,i,n=this.$filter.find(".taxonomy").first(),r=this.$filter.find(".filter-design").first(),o=this.$filter.find(".customize-terms").parent(),a=o.closest(".yith-toggle-content-row"),l=o.next(".description"),s=o.find("input"),c=l.find(".wccl-notice"),u=l.find(".images-notice"),f=n.data("taxonomies"),d=n.val(),h=r.val();yith_wcan_admin.yith_wccl_enabled&&null!==(e=f[d])&&void 0!==e&&e.is_attribute?c.show():c.hide(),null!==(t=f[d])&&void 0!==t&&t.supports_images&&"label"===h?u.show():u.hide(),"color"!==h||yith_wcan_admin.yith_wccl_enabled&&null!==(i=f[d])&&void 0!==i&&i.is_attribute?a.removeClass("disabled"):(s.prop("checked",!0),a.addClass("disabled"))}},{key:"initType",value:function(){var e=this.$filter.find(".filter-type"),t=this.$filter.find(".filter-design");e.on("change",(function(){for(var n=e.val(),r={review:["color","label"],price_range:["color","label"]},o=0,a=Object.entries(yith_wcan_admin.supported_designs);o<a.length;o++){var l,s=E(a[o],2),c=s[0],u=s[1],f=t.find('[value="'.concat(c,'"]'));null!=r&&null!==(l=r[n])&&void 0!==l&&l.includes(c)?f.remove():f.length||t.append(i("<option/>",{value:c,text:u}))}t.change()})).change()}},{key:"initDesign",value:function(){var e=this;this.$filter.find(".filter-design").on("change",(function(){return e.updateTermFields()})).change()}},{key:"initCurrencyFields",value:function(){this.$filter.find("[data-currency]").each((function(){var e=i(this),t=i("<span/>",{text:e.data("currency"),class:"currency"});e.after(t)}))}},{key:"initErrorsHandling",value:function(){var e=this;this.$filter.find(":input").on("invalid",(function(t){var n=t.target,r=i(n);t.preventDefault(),e.preset.goToFilter(e.$filter,r).done((function(){e.addInputValidationMessage(r,n.validationMessage)}))})),this.$filter.on("change keydown",":input",(function(){var e=i(this);e.hasClass("validation-error")&&(e.removeClass("validation-error").removeClass("required-field-empty"),e.next(".validation-message").remove())}))}},{key:"initSave",value:function(){var e=this;this.$filter.find(".save").on("click",(function(){return e.maybeSave(),!1}))}},{key:"initClone",value:function(){var e=this;this.$filter.find(".clone").on("click",(function(){return e.clone()}))}},{key:"initDelete",value:function(){var e=this;this.$filter.find(".delete").on("click",(function(){return e.maybeDelete()}))}},{key:"maybeSave",value:function(){var e=this;if(!this.validate())return!1;this.save().done((function(t){e.preset.maybeSetId(null==t?void 0:t.id),e.close()}))}},{key:"save",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.preset.getId(),i=this.getData(),n=this.getId(),r=this.$filter.prev(".filter-row"),o=this.getTermsPool(),a=r.length?r.attr("id").replace("filter_",""):-1;return i.terms=Object.fromEntries(o.map((function(e){return[e.term_id,e]}))),i.terms_order=o.map((function(e){return e.term_id})),f.post.call(e?this.$filter:null,"save_preset_filter",{preset:t,filter:i,filter_id:n,prev_filter_id:a,_wpnonce:yith_wcan_admin.nonce.save_preset_filter})}},{key:"clone",value:function(){this.preset.addFilter(this.getData())}},{key:"maybeDelete",value:function(){var e=this;confirm(yith_wcan_admin.messages.confirm_delete)&&this.delete().then((function(){e.$filter.remove(),e.preset.afterFilterDelete(e)}))}},{key:"delete",value:function(){var e=this.preset.getId();if(!e)return Promise.resolve();var t=this.getId();return t?f.post.call(this.$filter,"delete_preset_filter",{preset:e,filter_id:t,_wpnonce:yith_wcan_admin.nonce.delete_preset_filter}):Promise.resolve()}},{key:"validate",value:function(){var e=this.preset.$layout.find(":checked").val(),t=this.findField("title",!1),i=t.val();return"horizontal"!==e||i?this.$filter.find(":input").get().reduce((function(e,t){return e&&t.reportValidity()}),!0):(this.addInputValidationMessage(t,yith_wcan_admin.messages.filter_title_required),this.preset.goToFilter(this),!1)}},{key:"updateLayout",value:function(e){var t=this.findField("show_toggle"),i=this.findField("tooltip",!1);"horizontal"===e?(null==t||t.hide().find(":input").prop("checked",!1).val("no").change(),null==i||i.parent().hide()):(null==t||t.show(),null==i||i.parent().show())}},{key:"getId",value:function(){return this.id||(this.id=this.$filter.attr("id").replace("filter_",""))}},{key:"getRowIndex",value:function(){return this.$filter.data("item_key")}},{key:"getData",value:function(){return A(A({},o(this.$filter,{formatName:function(e){return e.replace(/filters\[[0-9]+]\[([a-z_-]+)]/,"$1")},filterItems:function(e,t){return!i(t).is('[name*="[terms]"]')}})),{},{terms:this.getTermsPool()})}},{key:"populate",value:function(e){var t=this.getId();for(var n in e){var r=e[n],o="terms"===n?"filters_".concat(t,"_term_ids"):"filters_".concat(t,"_").concat(n),a=this.$filter.find("#".concat(o));if(a.length||"price_ranges"===n)if("terms"===n){var l,s=F(r);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(null!=c&&c.label){var u=i("<option/>",{value:c.term_id,text:c.label,selected:!0});a.append(u)}}}catch(e){s.e(e)}finally{s.f()}this.$filter.find(".terms-wrapper").data("terms",r),a.val(r.map((function(e){return e.term_id}))).change(),this.updateTerms(!0)}else if("price_ranges"===n){var f=r;if("object"!==C(f))continue;for(var d in f){var h=f[d];this.addRange(h)}}else a.is(":checkbox")?a.prop("checked","yes"===r).val(r).change():a.is('[data-type="radio"]')?a.find(":input").prop("checked",!1).filter('[value="'+r+'"]').prop("checked",!0).change():"title"===n?a.val(e[n]).keyup():"taxonomy"===n?a.data("taxonomy",r).val(r):a.val(e[n]).change()}}},{key:"isOpen",value:function(){return this.$filter.hasClass("filter-row-opened")}},{key:"open",value:function(){return this.$toggleTitle.find(".title-arrow").removeClass("yith-icon-arrow-right-alt").addClass("yith-icon-arrow-down-alt"),this.$filter.addClass("filter-row-opened").find(".yith-toggle-content").slideDown().promise()}},{key:"isClosed",value:function(){return!this.isOpen()}},{key:"close",value:function(){var e=this;return this.$filter.find(".yith-toggle-title").find(".title-arrow").addClass("yith-icon-arrow-right-alt").removeClass("yith-icon-arrow-down-alt"),this.$filter.find(".yith-toggle-content").slideUp(400,(function(){e.$filter.removeClass("filter-row-opened")})).promise()}},{key:"getTermsPool",value:function(){return P(this.$filter.find(".terms-wrapper").data("terms").values()).filter((function(e){return!!e}))}},{key:"getTermsToShow",value:function(){var e=this.getTermsPool(),t=parseInt(yith_wcan_admin.terms_per_page);return e&&this.termsPaginated&&t&&Object.keys(e).length>t?e=e.slice(0,t):this.$filter.find(".show-more-terms").hide(),e}},{key:"getTermsType",value:function(){var e=this.$filter.find(".filter-design"),t=null==e?void 0:e.val();return"label"!==t&&"color"!==t?"labels_only":"color"===t?"complete":"image_only"}},{key:"initTerms",value:function(){var e=this,t=this.$filter.find(".term-box"),n=this.$filter.find(".order-by"),r=this.$filter.find(".show-more-terms");this.termsPaginated=!!this.$filter.find(".show-more-terms").length;var o,a=F(t.get());try{for(a.s();!(o=a.n()).done;){var l=o.value,s=i(l),c=new S(s,this);this.terms.set(c.getId(),c)}}catch(e){a.e(e)}finally{a.f()}r.on("click",(function(){return e.showMoreTerms()})),n.on("change",(function(){var t=n.val();e["include"===t?"initTermsDragDrop":"destroyTermsDragDrop"]()})).change(),this.updateTermFields()}},{key:"initTermsDragDrop",value:function(){var e=this;try{this.$filter.find(".terms-wrapper").sortable({cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",stop:function(){var t=e.getTermsPool(),i=[];e.$filter.find(".term-box").get().map((function(e){return parseInt(e.dataset.term_id)})).forEach((function(e){var n=t.findIndex((function(t){return t.term_id===e}));i.push(t[n])})),e.termsPaginated&&(i=i.concat(t.slice(yith_wcan_admin.terms_per_page))),e.$filter.find(".terms-wrapper").data("terms",i)}})}catch(e){}}},{key:"destroyTermsDragDrop",value:function(){try{this.$filter.find(".terms-wrapper").sortable("destroy")}catch(e){}}},{key:"afterTermsSelected",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.$filter.find(".term-search"),n=i.val().map((function(e){return parseInt(e)})),r=this.getTermsPool(),o=this.getTermsType(),a=r.map((function(e){return e.term_id})),l=n.filter((function(e){return!a.includes(e)})),s=a.filter((function(e){return!n.includes(e)}));s.forEach((function(e){delete r[r.findIndex((function(t){return e===(null==t?void 0:t.term_id)}))]})),l.forEach((function(t){var n=i.find('[value="'.concat(t,'"]')).text();r.push({id:e.getId(),term_id:t,label:n,name:n,color_1:"#007694",color_2:"",mode:"images_only"===o?"image":"color"})})),(s.length||l.length)&&(l.length&&(this.termsPaginated=!1),this.$filter.find(".terms-wrapper").data("terms",r),this.updateTerms(t))}},{key:"afterTermChanged",value:function(e){var t=this.getTermsPool(),i=e.getId(),n=t.findIndex((function(e){return i===(null==e?void 0:e.term_id)}));t[n]=e.getData(),this.$filter.find(".terms-wrapper").data("terms",t)}},{key:"updateTerms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$filter.find(".terms-wrapper");if(e||t.is(":visible")){var n=this.getTermsToShow(),r=new Map,o=wp.template("yith-wcan-filter-term");if(t.find(".term-box").detach(),n){var a,l=F(n);try{for(l.s();!(a=l.n()).done;){var s=a.value,c=void 0,u=void 0;(u=this.terms.has(s.term_id)?(c=this.terms.get(s.term_id)).$term:i(o(s))).length&&t.append(u),c||(c=new S(u,this)),c&&r.set(s.term_id,c)}}catch(e){l.e(e)}finally{l.f()}}this.terms=r,this.updateTermFields()}}},{key:"showMoreTerms",value:function(){this.termsPaginated=!1,this.updateTerms()}},{key:"updateTermFields",value:function(){var e=this.getTermsType();P(this.terms.values()).map((function(t){return t.updateFields(e)}))}},{key:"confirmAddAllTerms",value:function(){var e,t,i,n=this.$filter.find(".taxonomy").first(),r=n.val(),o=n.data("taxonomies"),a=yith_wcan_admin.messages.confirm_add_all_terms;return!(null!==(e=o[r])&&void 0!==e&&e.terms_count&&(null===(t=o[r])||void 0===t?void 0:t.terms_count)>1)||confirm(a.replace("%s",null===(i=o[r])||void 0===i?void 0:i.terms_count))}},{key:"initRanges",value:function(){var e=this.$filter.find(".range-box");this.initAddRange(),this.initRangesDragDrop();var t,n=F(e.get());try{for(n.s();!(t=n.n()).done;){var r=t.value,o=i(r),a=new O(o,this);this.ranges.set(a.getId(),a)}}catch(e){n.e(e)}finally{n.f()}this.initRangesPosition()}},{key:"initAddRange",value:function(){var e=this;this.$filter.find(".add-price-range").on("click",(function(t){t.preventDefault(),e.addRange(),e.initRangesPosition()}))}},{key:"initRangesPosition",value:function(){var e,t=F(this.ranges.values());try{for(t.s();!(e=t.n()).done;){var i=e.value;i.toggleUnlimited(i.$range.is(":last-child"))}}catch(e){t.e(e)}finally{t.f()}}},{key:"initRangesDragDrop",value:function(){var e=this;this.$filter.find(".ranges-wrapper").sortable({cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",stop:function(){var t,i=function(e,t){return function(i,n){return n.replace(e,t)}},n=F(e.ranges.values());try{for(n.s();!(t=n.n()).done;){var r=t.value.$range,o=r.index(),a=i(r.data("range_id"),o);r.data("range_id",o).find(":input").attr("name",a).attr("id",a)}}catch(e){n.e(e)}finally{n.f()}e.initRangesPosition()}})}},{key:"addRange",value:function(e,t){var n=wp.template("yith-wcan-filter-range")({id:this.getRowIndex(),range_id:t||this.getNextRangeIndex(),min:0,max:0}),r=i(n),o=new O(r,this);return e&&o.populate(e),this.ranges.set(o.getId(),o),this.$filter.find(".ranges-wrapper").append(r),r}},{key:"afterRangeDelete",value:function(e){this.ranges.delete(e.getId()),this.initRangesPosition()}},{key:"findField",value:function(e){var t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e){case"terms_options":t=this.$filter.find(".terms-wrapper");break;case"price_ranges":t=this.$filter.find(".ranges-wrapper");break;default:t=this.$filter.find(':input[name*="['+e+']"]')}return t.length?i?t.closest(".yith-toggle-content-row"):t:null}},{key:"getNextRangeIndex",value:function(){var e,t=this.$filter.find(".ranges-wrapper"),i=t.data("index");return i||(i=P(this.ranges.values()).reduce((function(e,t){return Math.max(e,t.getId())}),0)),e=++i,t.data("index",e),e}},{key:"addInputValidationMessage",value:function(e,t){var n=i("<span/>",{class:"validation-message",text:t});e.addClass("required-field-empty").addClass("validation-error").next(".validation-message").remove().end().after(n)}}],t&&M(e.prototype,t),a&&M(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function V(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=H(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function q(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return Q(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function J(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G(n.key),n)}}function W(e,t,i){return(t=G(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function G(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}var K=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W(this,"rowIndex",0),W(this,"$wrapper",void 0),W(this,"$mainAddNewFilterButton",void 0),W(this,"$loadMoreFiltersButtons",void 0),W(this,"$filtersContainer",void 0),W(this,"$layout",void 0),W(this,"$page",void 0),W(this,"filters",new Map),t.length&&(this.$wrapper=t,this.$mainAddNewFilterButton=this.$wrapper.find("#add_new_filter"),this.$filtersContainer=this.$wrapper.find(".preset-filters"),this.$layout=this.$wrapper.find("#preset_layout"),this.$page=this.$wrapper.find("#paged"),this.$loadMoreFiltersButtons=this.$wrapper.find(".load-more-filters"),this.init())},r=[{key:"getRowIndex",value:function(e){var t=e.data("item_key");return t?parseInt(t):0}}],(t=[{key:"init",value:function(){this.initFilters(),this.initAddFilter(),this.initLoadMoreFilters(),this.initLayout(),this.initSubmit()}},{key:"initAddFilter",value:function(){var e=this;this.$wrapper.find(".add-new-filter").on("click",(function(){return e.addFilter(),!1}))}},{key:"initLoadMoreFilters",value:function(){var e=this;this.$loadMoreFiltersButtons.on("click",(function(){return e.loadMoreFilters(),!1}))}},{key:"initSubmit",value:function(){var e=this;this.$wrapper.find("#submit").on("click",(function(t){return!!e.$wrapper.find("form").get(0).reportValidity()&&!!e.validateFilters()&&(t.preventDefault(),n(e.$wrapper),f.post.call(null,"save_preset",e.getData()).then((function(t){e.maybeSetId(null==t?void 0:t.id);var i=q(e.filters.values()).map((function(e){return e.save(!1)}));return Promise.all(i)})).then((function(){return window.location=e.getUrl()})))}))}},{key:"initLayout",value:function(){var e=this;this.$layout.on("change","input",(function(){return e.afterLayoutChange()})).find("input").first().change()}},{key:"initFilters",value:function(){this.initFiltersDragDrop();var e,t=V(this.$filtersContainer.find(".filter-row").get());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=i(n),o=new L(r,this);this.filters.set(o.getId(),o)}}catch(e){t.e(e)}finally{t.f()}}},{key:"initFiltersDragDrop",value:function(){this.$filtersContainer.sortable({cursor:"move",handle:".yith-toggle-title",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0})}},{key:"afterLayoutChange",value:function(){var e,t=this.$layout.find(":checked").val(),i=V(this.filters.values());try{for(i.s();!(e=i.n()).done;)e.value.updateLayout(t)}catch(e){i.e(e)}finally{i.f()}}},{key:"filterExists",value:function(e){return this.filters.has(e)}},{key:"addFilter",value:function(e,t){var n=wp.template("yith-wcan-filter")({id:t||this.nextRowIndex(),key:this.filters.size}),r=i(n);this.$filtersContainer.append(r);var o=new L(r,this);return e&&o.populate(e),this.afterFilterAdd(o),r}},{key:"afterFilterAdd",value:function(e){var t=this;this.filters.set(e.getId(),e),this.closeAllFilters().then((function(){return t.goToFilter(e)})),this.updateRowIndex(),this.maybeHideEmptyBox(),this.$mainAddNewFilterButton.show()}},{key:"afterFilterDelete",value:function(e){this.filters.delete(e.getId()),this.maybeShowEmptyBox(),this.filters.size||this.$mainAddNewFilterButton.hide()}},{key:"closeAllFilters",value:function(){var e=q(this.filters.values()).map((function(e){return e.close()}));return Promise.all(e)}},{key:"loadMoreFilters",value:function(){var e=this,t=this.$page.val();f.get.call(this.$loadMoreFiltersButtons,"load_more_filters",{preset:this.getId(),page:++t,_wpnonce:yith_wcan_admin.nonce.load_more_filters}).done((function(i){if(i){if(i.filters){var n,r=V(i.filters);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o.id;e.filterExists(a)||e.addFilter(o,a)}}catch(e){r.e(e)}finally{r.f()}}i.has_more?e.$page.val(t):(e.$loadMoreFiltersButtons.remove(),e.$page.remove(),e.$page=null)}}))}},{key:"validateFilters",value:function(){return q(this.filters.values()).reduce((function(e,t){return e&&t.validate()}),!0)}},{key:"goToFilter",value:function(e,t){return e.isOpen()?(t=t||e.$filter,i("html, body").stop(!0).animate({scrollTop:t.offset().top-100}).promise()):i("html, body").stop(!0).animate({scrollTop:e.$filter.offset().top-100}).promise().done((function(){e.open(),t&&t.length&&i("html, body").animate({scrollTop:t.offset().top-100})}))}},{key:"getId",value:function(){return this.$wrapper.find("#preset_id").val()}},{key:"getUrl",value:function(){var e=new URL(window.location),t=this.getId();return t&&(e.searchParams.set("action","edit"),e.searchParams.set("preset",t)),e.toString()}},{key:"maybeSetId",value:function(e){!this.getId()&&e&&this.$wrapper.find("#preset_id").val(e)}},{key:"updateRowIndex",value:function(){var e=this.$filtersContainer.data("max-filter-id"),t=Math.max.apply(Math,q(this.filters.keys()));this.rowIndex=Math.max(e,t)}},{key:"nextRowIndex",value:function(){return this.rowIndex||this.updateRowIndex(),++this.rowIndex}},{key:"currentRowIndex",value:function(){return this.rowIndex||this.updateRowIndex(),this.rowIndex}},{key:"getData",value:function(){return o(this.$wrapper,{filterItems:function(e,t){return!i(t).is('[name^="filters"]')}})}},{key:"maybeShowEmptyBox",value:function(){var e=this.$filtersContainer.children(".yith-wcan-admin-no-post");!e.length||e.is(":visible")||this.filters.size||e.show()}},{key:"maybeHideEmptyBox",value:function(){var e=this.$filtersContainer.children(".yith-wcan-admin-no-post");e.length&&e.is(":visible")&&this.filters.size&&e.hide()}}])&&J(e.prototype,t),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();jQuery((function(e){var t=e("#yith_wcan_panel_filter-preset-edit");t.length&&e(document).on("yith_wcan_filters_init",(function(){new K(t)})).trigger("yith_wcan_filters_init")}))})();